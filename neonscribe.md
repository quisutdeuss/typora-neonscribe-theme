# NeonScribe Theme 更新日志

## 2024年1月更新

### 颜色方案优化

#### 背景色系统

将背景色改为深紫灰色系，更好地配合主题色：

- `--of-darkest-color`: #12121f (最深的背景)
- `--of-darker-color`: #16162a (侧边栏背景)
- `--of-dark-color`: #1a1a33 (普通背景)
- `--of-dark-color2`: #1e1e3d (稍亮的背景)

#### 代码块优化

- 代码块背景色调整为 #13132a，与主题更协调
- 保持了深色调但增加了可读性

### HTML 标签样式更新

使用 Dracula 主题配色：

- 粗体文本 (b, strong): #ff79c6 (粉色)
- 上标文本 (sup): #bd93f9 (紫色)
- 下标文本 (sub): #ffb86c (橙色)
- 斜体文本 (i, .italic): #8be9fd (青色)
- 强调文本 (em): #50fa7b (绿色)
- 删除线文本 (del): #ff5555 (红色)
- 插入文本 (ins): #f1fa8c (黄色)

### 高亮文本样式优化

- 使用透明背景和细边框设计
- 边框颜色：#686bdd
- 边框样式：1.5px solid
- 圆角设计：border-radius: 999px
- 文本颜色：#f8f8f2 (浅色)

#### 高亮文本中的特殊元素

1. 链接样式：
   - 默认颜色：#ffb86c (橙色)
   - 悬停颜色：#686bdd (主题色)

2. 代码块样式：
   - 保持原有代码块样式
   - 文本颜色：#f8f8f2
   - 使用伪元素处理反引号颜色

### 文件树样式优化

- 文件夹颜色：#686bdd
- 悬停效果：#a5a7ff
- 修复了斜体样式影响文件树的问题

### 样式范围限制

- 将斜体样式限制在编辑区域内：

```css
#write i, 
#write .italic {
    color: #8be9fd !important;
}
```

### 主题色保持不变

- 主色调：#686bdd
- 亮色变体：#a5a7ff

### 代码块样式优化

- 调整了代码块和语言标识器的样式布局
- 添加了代码块的相对定位
- 设置了语言标识器的位置和样式：
  - 右侧间距：5px
  - 底部位置：-1.2em
  - 字体大小：0.8em
  - 背景色：使用主题深色
  - 圆角设计：3px
- 注意：为了最佳显示效果，建议在 Markdown 文档中的代码块之间添加空行

### 代码语言标识器深度优化 (2024-01-08)

#### 问题发现与分析

1. 选择器识别问题
   - 发现之前使用了错误的选择器 `.CodeMirror-dialog`
   - 通过检查元素找到正确的选择器 `.ty-input-after.ty-cm-lang-input`
   - `.CodeMirror-dialog` 实际上并不控制语言标识器的样式

2. 样式问题
   - 语言标识器位置不够精确
   - 背景色与代码块不匹配
   - 字体大小过小，不够醒目
   - 缺乏突出显示的文字颜色

#### 具体改动

1. 选择器修正

```css
.ty-input-after.ty-cm-lang-input {
    position: absolute;
    right: 0px;
    bottom: 5px;
    z-index: 1;
    background: var(--code-bg-color);
    padding: 2px 6px;
    border-radius: 3px;
    font-size: 1em;
    color: var(--of-strong-code);
}
```

1. 样式优化说明

   - 位置调整：
     - 使用 `position: absolute` 确保精确定位
     - `right: 0` 实现与代码块右边缘对齐
     - `bottom: 5px` 在代码块内部保持适当距离
   - 视觉优化：
     - 使用 `var(--code-bg-color)` (#13132a) 保持背景色一致性
     - 字体大小从 0.8em 增加到 1em 提高可读性
     - 添加 `var(--of-strong-code)` 颜色使文字更醒目
   - 细节处理：
     - 保留 3px 圆角保持风格统一
     - 适当的内边距 (2px 6px) 确保文字不会太挤

#### 新发现

1. HTML代码块特殊情况
   - HTML代码块使用不同的选择器 `.md-rawblock-tooltip-name`
   - 该选择器目前在主题中未定义样式
   - 保留此问题作为后续优化项

#### 经验总结

1. 选择器调试技巧
   - 使用浏览器开发者工具对元素进行检查
   - 验证选择器的实际作用范围
   - 避免使用未经验证的选择器

2. 样式开发最佳实践
   - 优先使用主题中定义的CSS变量
   - 注意样式的继承和覆盖关系
   - 通过渐进式调整找到最佳效果

3. 定位系统掌握
   - 理解绝对定位和相对定位的区别
   - 善用定位属性实现精确布局
   - 考虑不同情况下的位置表现

#### 遗留问题与后续计划

1. HTML代码块样式统一
   - 考虑为 `.md-rawblock-tooltip-name` 添加样式
   - 确保与其他代码块标识器风格一致

2. 可能的优化方向
   - 考虑添加过渡动画效果
   - 研究是否需要响应式调整
   - 评估是否需要添加交互效果

### Mermaid 图表样式优化 (2024-01-08)

#### 配色方案更新

1. 主要颜色定义
   - 荧光绿 (#2ecc71) - 用于主要节点和边框
   - 深紫色 (#6c5ce7) - 用于文字和连接线
   - 深灰色 (#4c5154, #3c3f41) - 用于次要节点

2. 图表元素样式
   - 节点样式：
     - 填充色使用荧光绿
     - 边框使用深紫色
     - 2px 边框宽度提高清晰度
   - 连接线：
     - 使用深紫色保持视觉连贯
     - 加粗处理提高可读性
   - 文字：
     - 深紫色确保与背景对比
     - 继承主题字体设置

#### 图表类型支持

1. 状态图
   - 支持嵌套状态结构
   - 清晰的状态转换线条
   - 优化的状态节点样式

2. 思维导图
   - 多层级节点样式区分
   - 统一的连接线风格
   - 良好的层级视觉效果

3. 类图
   - 清晰的类定义框架
   - 突出的标题样式
   - 优化的文本可读性

4. 甘特图
   - 交替的区块样式
   - 醒目的任务条
   - 清晰的时间线展示

#### 样式文件组织

- 将样式定义集中在 `mermaid.dark.css`
- 使用清晰的注释分类
- 保持与主题整体风格统一

#### 后续优化方向

1. 添加更多预定义样式类
2. 优化不同尺寸下的显示效果
3. 考虑添加动画过渡效果
4. 扩展对更多图表类型的支持

### 待办事项

- [ ] 优化 codeblock.dark.css 中的 CSS 语法高亮，使其符合 Dracula 主题配色
